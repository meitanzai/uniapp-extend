## 瀑布流

> 这是一款简单又好用的瀑布流布局模板，通过页面模板+组件的方式。充分利用组件的复用性和页面的生命周期。为了更好的兼容和更高的性能消耗，所以不采用多重自定义组件嵌套。

#### <font color="red">源码中有详细的注释，请各位开发者按个人需求自行修改。</font>


#### 瀑布流布局最大的难点是在于图片加载是一个异步的过程，所以本插件也是利用了图片加载这个事件来触发组件初始化完成的。为了更好的加载体验和降低用户的用户的流量消耗，推荐使用`缩略图`来做为列表中的显示（也应当这么做，不只是在瀑布流布局中），这也是做好一个产品最基本的优化要求。

### 下载&体验

#### H5在线版 [点我预览](https://mydarling.gitee.io/uniapp-extend/#/uni_modules/helang-waterfall/pages/waterfall/waterfall)

> 如果您有多个不同样式的瀑布流组件需求，可以将组件多复制几份，按不同的需求修改。也可以通过自动扩展 `waterfall-list`组件属性，来实现多个`waterfall-item` 子组件的切换。

### <font color="red">对使用有疑问，可以先导入 [示例项目] 学习 页面与组件的使用流程</font>

### 组件引用

```
<template>
	<view>
		<helang-waterfall-list
			:status="waterfall.status"
			:list="waterfall.list"
			:reset="waterfall.reset"
			@click="onClick"
			@done="onDone"
		></helang-waterfall-list>
	</view>
</template>

/* 引用组件 */
import helangWaterfallList from "@/uni_modules/helang-waterfall/components/waterfall/waterfall-list"

export default {
    components: {
        "helang-waterfall-list": helangWaterfallList
    },
    data() {
        return {
            // ...
            // 瀑布流组件相关
            waterfall:{
                status:"",
                reset:false,
                list:[]
            }
        }
    },
    methods:{
        //...
    }
}
```

### waterfall-list 组件属性说明

属性名 | 类型 | 说明
--------|------|------
status | String | 组件状态，默认`空字符串`,可选值看下方 `status` 属性说明
list | Array | 待渲染的数据，默认值`[]`
reset | Boolean | 重置列表，默认值`false`，设置为 true 时，瀑布流会自动重新渲染列表
awaitText | String | 等待加载文案，默认值`上拉加载更多`
loadingText | String | 加载中文案，默认值`加载中`
successText | String | 加载成功文案，默认值`加载中`，一般与加载中保持一致即可，主要为提示组件可以开始渲染了
finishText | String | 加载结束文案，默认值`没有更多了`，用于没有更多数据时候展示
failText | String | 加载失败文案，默认值`加载失败`，用于数据获取异常时展示

### waterfall-list 组件 status 属性说明

属性值 | 说明
--------|------
await | 等待加载
loading | 等待加载
success | 加载成功
finish | 加载结束
fail | 加载失败

### waterfall-list 组件方法说明

方法名 | 回调参数 | 说明
--------|------|------
@click | `(data, index, tag)` | 点击事件 <br/> data：被点击的项目数据 <br/> index：被点击的项目序号 <br/> tag：被点击的项目标记
@done | `()` | 瀑布流渲染完成事件，无返回参数


### <font color="red">waterfall-item 组件 是用于渲染列表的整体效果项，使用时自行修改该组件的 CSS 和 绑定的数据属性</font>

### waterfall-item 组件属性说明

- <font color="red">waterfall-item 组件属性说明 可以不需要阅读，一般使用都是不需要修改的</font>

属性名 | 类型 | 说明
--------|------|------
params | Object | 组件内容参数，具体值自行按页面内容要求编写
index | Number | 组件序号，为点击事件等需要返回当前序号使用
tag | String / Number | 组件标记，为区别是左侧还是右侧列表使用


### waterfall-item 组件方法说明

- <font color="red">waterfall-item 组件方法说明 可以不需要阅读，一般使用都是不需要修改的</font>

方法名 | 必填 | 说明
--------|------|------
@height | 是 | 用于接收当前组件的高度，是瀑布流计算优先插入那一边的核心
@click | 否 | 当组件被点击时触发，返回当前组件的 `index` 和 `tag` 值


#### 友情提示：
1. 当前项目源码使用了 ES6 和 scss 请添加运行依赖
2. [插件ZIP]只包含模板文件和数据文件，不包含项目运行依赖（如 pages.json）
3. [示例项目ZIP]是完整的项目文件，可下载后导入 HBuilderX 中直接运行体验
4. 文件下载在当前页面的上部靠右位置，有 [下载插件ZIP] [下载示例项目ZIP] 按钮，点击即可下载